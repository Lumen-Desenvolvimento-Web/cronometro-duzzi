(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3686:()=>{},2383:()=>{},6414:(e,t,r)=>{Promise.resolve().then(r.bind(r,3596))},3596:(e,t,r)=>{"use strict";r.d(t,{MainApp:()=>Z});var s,a=r(5155),i=r(2115),l=r(4611),n=r(3463),o=r(9795);function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,n.$)(t))}function c(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),s=[];return t>0&&s.push("".concat(t,"h")),(r>0||t>0)&&s.push("".concat(r,"m")),s.push("".concat(e%60,"s")),s.join(" ")}let m=l.bL,u=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.B8,{ref:t,className:d("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});u.displayName=l.B8.displayName;let x=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.l9,{ref:t,className:d("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});x.displayName=l.l9.displayName;let f=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.UC,{ref:t,className:d("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});f.displayName=l.UC.displayName;var p=r(2317);let h=(0,r(1027).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=i.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:l=!1,...n}=e,o=l?p.DX:"button";return(0,a.jsx)(o,{className:d(h({variant:s,size:i,className:r})),ref:t,...n})});j.displayName="Button";let g=i.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});g.displayName="Input";let v=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});v.displayName="Card";let w=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",r),...s})});w.displayName="CardHeader";let N=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",r),...s})});N.displayName="CardTitle",i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let b=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:d("p-6 pt-0",r),...s})});b.displayName="CardContent";let y=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",r),...s})});y.displayName="CardFooter";let T=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:d("w-full caption-bottom text-sm",r),...s})})});T.displayName="Table";let S=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:d("[&_tr]:border-b",r),...s})});S.displayName="TableHeader";let I=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:d("[&_tr:last-child]:border-0",r),...s})});I.displayName="TableBody",i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let C=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});C.displayName="TableRow";let D=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:d("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});D.displayName="TableHead";let R=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});R.displayName="TableCell",i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:d("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption";var k=r(5686);function E(e){let{people:t,onAddPerson:r,onRemovePerson:s}=e,[l,n]=(0,i.useState)(""),o=()=>{l.trim()&&(r(l.trim()),n(""))};return(0,a.jsxs)(v,{children:[(0,a.jsx)(w,{children:(0,a.jsx)(N,{children:"Membros da Equipe"})}),(0,a.jsxs)(b,{children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,a.jsx)(g,{placeholder:"Digite o nome do membro da equipe",value:l,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&o()}}),(0,a.jsx)(j,{onClick:o,children:"Adicionar"})]}),(0,a.jsxs)(T,{children:[(0,a.jsx)(S,{children:(0,a.jsxs)(C,{children:[(0,a.jsx)(D,{children:"Nome"}),(0,a.jsx)(D,{className:"w-[100px]",children:"A\xe7\xf5es"})]})}),(0,a.jsx)(I,{children:0===t.length?(0,a.jsx)(C,{children:(0,a.jsx)(R,{colSpan:2,className:"text-center text-muted-foreground",children:"Nenhum membro da equipe adicionado ainda"})}):t.map(e=>(0,a.jsxs)(C,{children:[(0,a.jsx)(R,{children:e.name}),(0,a.jsx)(R,{children:(0,a.jsx)(j,{variant:"ghost",size:"icon",onClick:()=>s(e.id),children:(0,a.jsx)(k.A,{className:"h-4 w-4"})})})]},e.id))})]})]})]})}var z=r(2223),M=r(1719),_=r(1902),P=r(8867);let O=z.bL;z.YJ;let A=z.WT,q=i.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(z.l9,{ref:t,className:d("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[s,(0,a.jsx)(z.In,{asChild:!0,children:(0,a.jsx)(M.A,{className:"h-4 w-4 opacity-50"})})]})});q.displayName=z.l9.displayName;let F=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(z.PP,{ref:t,className:d("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(_.A,{className:"h-4 w-4"})})});F.displayName=z.PP.displayName;let L=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(z.wn,{ref:t,className:d("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(M.A,{className:"h-4 w-4"})})});L.displayName=z.wn.displayName;let U=i.forwardRef((e,t)=>{let{className:r,children:s,position:i="popper",...l}=e;return(0,a.jsx)(z.ZL,{children:(0,a.jsxs)(z.UC,{ref:t,className:d("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,a.jsx)(F,{}),(0,a.jsx)(z.LM,{className:d("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(L,{})]})})});U.displayName=z.UC.displayName,i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(z.JU,{ref:t,className:d("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=z.JU.displayName;let W=i.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(z.q7,{ref:t,className:d("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(z.VF,{children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})}),(0,a.jsx)(z.p4,{children:s})]})});function V(e){let{timer:t,personName:r,onStop:s}=e,[l,n]=(0,i.useState)(0),[o,d]=(0,i.useState)({backgroundColor:"rgb(22, 163, 74)",color:"white"});return(0,i.useEffect)(()=>{let e=new Date(t.startTime).getTime(),r=()=>{let t;let r=Math.floor((Date.now()-e)/1e3);n(r);let s=Math.min(r/3600,1),a="white";if(s<.33)t="rgb(".concat(22+s/.33*212,", ").concat(163- -(s/.33*39),", 74)");else if(s<.66)t="rgb(234, ".concat(202-(s-.33)/.33*202,", 74)");else{let e=(s-.66)/.34,r=74*(1-e);t="rgb(".concat(234-234*e,", ").concat(r,", ").concat(r,")"),e>.7&&(a="white")}d({backgroundColor:t,color:a})};r();let s=setInterval(r,1e3);return()=>clearInterval(s)},[t.startTime]),(0,a.jsxs)(v,{className:"overflow-hidden",children:[(0,a.jsx)(b,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between items-center",children:[(0,a.jsx)("span",{className:"font-bold text-5xl",children:r}),(0,a.jsxs)("span",{className:"text-xl text-muted-foreground",children:["Nota #",t.orderNumber]})]}),(0,a.jsx)("div",{className:"text-6xl font-bold text-center py-4",children:c(l)}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Iniciado: ",new Date(t.startTime).toLocaleString("pt-BR")]})]})}),(0,a.jsx)(y,{className:"bg-muted p-2",children:(0,a.jsx)(j,{onClick:s,className:"w-full transition-colors duration-300",style:o,children:"Finalizar"})})]})}W.displayName=z.q7.displayName,i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(z.wv,{ref:t,className:d("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=z.wv.displayName;var B=r(4504);function J(e){let{people:t,activeTimers:r,onStartTimer:s,onStopTimer:l}=e,[n,o]=(0,i.useState)(""),[d,c]=(0,i.useState)(""),[m,u]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!1),[p,h]=(0,i.useState)(!1),[T,S]=(0,i.useState)([]);(0,i.useEffect)(()=>{if(f("electron"in window),"electron"in window){h(window.electron.isTimerWindow());let e=window.electron.onTimerUpdate(e=>{window.electron.isTimerWindow()&&(console.log("Timers atualizados na janela destacada",e),S(e))}),t=window.electron.onInitTimerWindow(e=>{window.electron.isTimerWindow()&&e.timers&&(console.log("Inicializando janela de timers com dados",e),S(e.timers))}),r=window.electron.onTimerWindowClosed(()=>{u(!1)});return()=>{e&&e(),t&&t(),r&&r()}}},[]),(0,i.useEffect)(()=>{x&&window.electron&&m&&(console.log("Enviando timers atualizados para a janela destacada:",r),window.electron.updateTimers(r))},[r,x,m]);let I=e=>r.some(t=>t.personId===e),C=()=>{if(n&&d.trim()){if(I(n)){console.warn("Esta pessoa j\xe1 possui um cron\xf4metro ativo");return}s(n,d.trim()),c("")}},D=()=>t.filter(e=>!I(e.id));if(p){let e=T.length>0?T:r;return(0,a.jsx)("div",{className:"p-6 space-y-6",children:(0,a.jsxs)(v,{children:[(0,a.jsx)(w,{children:(0,a.jsx)(N,{children:"Cron\xf4metros Ativos"})}),(0,a.jsx)(b,{children:0===e.length?(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"Nenhum cron\xf4metro ativo."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>{let r=t.find(t=>t.id===e.personId);return(0,a.jsx)(V,{timer:e,personName:(null==r?void 0:r.name)||"Desconhecido",onStop:()=>l(e.id)},e.id)})})})]})})}return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(v,{children:[(0,a.jsx)(w,{children:(0,a.jsx)(N,{children:"Iniciar Novo Cron\xf4metro"})}),(0,a.jsxs)(b,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(O,{value:n,onValueChange:o,children:[(0,a.jsx)(q,{children:(0,a.jsx)(A,{placeholder:"Selecione o membro da equipe"})}),(0,a.jsx)(U,{children:t.map(e=>(0,a.jsxs)(W,{value:e.id,disabled:I(e.id),children:[e.name," ",I(e.id)?"(Timer ativo)":""]},e.id))})]}),(0,a.jsx)(g,{placeholder:"N\xfamero da nota",value:d,type:"number",onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C()}}),(0,a.jsx)(j,{onClick:C,disabled:!n||!d.trim(),children:"Iniciar Cron\xf4metro"})]}),(0,a.jsxs)("div",{className:"col-span-full mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Membros dispon\xedveis (sem cron\xf4metros ativos):"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[D().map(e=>(0,a.jsx)(j,{variant:"outline",size:"sm",onClick:()=>o(e.id),className:"text-xs",children:e.name},e.id)),0===D().length&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Todos os membros possuem cron\xf4metros ativos."})]})]})]})]}),(0,a.jsxs)(v,{children:[(0,a.jsxs)(w,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(N,{children:"Cron\xf4metros Ativos"}),x&&(0,a.jsxs)(j,{variant:"outline",size:"sm",onClick:()=>{x&&window.electron&&(window.electron.detachTimers(r),u(!0))},disabled:m,title:"Destacar cron\xf4metros em uma nova janela",children:[(0,a.jsx)(B.A,{className:"h-4 w-4 mr-2"}),"Destacar Timers"]})]}),(0,a.jsx)(b,{children:0===r.length?(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"Nenhum cron\xf4metro ativo. Inicie um novo cron\xf4metro acima."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(e=>{let r=t.find(t=>t.id===e.personId);return(0,a.jsx)(V,{timer:e,personName:(null==r?void 0:r.name)||"Desconhecido",onStop:()=>l(e.id)},e.id)})})}),m&&(0,a.jsx)(y,{children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Os cron\xf4metros est\xe3o sendo exibidos em uma janela separada."})})]})]})}var H=r(4857),Y=r(7660);function G(e){let{people:t,timeRecords:r}=e,[s,l]=(0,i.useState)("all"),[n,o]=(0,i.useState)("all"),d=(0,i.useMemo)(()=>{let e=[...r],t=new Date;if("today"===s){let r=new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString();e=e.filter(e=>e.startTime>=r)}else if("week"===s){let r=new Date(t);r.setDate(t.getDate()-t.getDay()),r.setHours(0,0,0,0),e=e.filter(e=>e.startTime>=r.toISOString())}else if("month"===s){let r=new Date(t.getFullYear(),t.getMonth(),1).toISOString();e=e.filter(e=>e.startTime>=r)}return"all"!==n&&(e=e.filter(e=>e.personId===n)),e},[r,s,n]),p=(0,i.useMemo)(()=>{let e={};return t.forEach(t=>{e[t.id]={count:0,totalTime:0,avgTime:0,minTime:Number.POSITIVE_INFINITY,maxTime:0}}),d.forEach(t=>{e[t.personId]&&(e[t.personId].count++,e[t.personId].totalTime+=t.duration,t.duration<e[t.personId].minTime&&(e[t.personId].minTime=t.duration),t.duration>e[t.personId].maxTime&&(e[t.personId].maxTime=t.duration))}),Object.keys(e).forEach(t=>{e[t].count>0&&(e[t].avgTime=e[t].totalTime/e[t].count),e[t].minTime===Number.POSITIVE_INFINITY&&(e[t].minTime=0)}),e},[t,d]),h=e=>"summary"===e?t.map(e=>{let t=p[e.id];return{Nome:e.name,"Pedidos Conclu\xeddos":t.count,"Tempo M\xe9dio":t.count>0?c(t.avgTime):"-","Tempo Mais R\xe1pido":t.minTime>0?c(t.minTime):"-","Tempo Mais Lento":t.maxTime>0?c(t.maxTime):"-"}}):d.sort((e,t)=>new Date(t.startTime).getTime()-new Date(e.startTime).getTime()).map(e=>{let r=t.find(t=>t.id===e.personId);return{Nome:(null==r?void 0:r.name)||"Desconhecido","N\xfamero da Nota":e.orderNumber,Data:new Date(e.startTime).toLocaleDateString("pt-BR"),"Tempo Gasto":c(e.duration)}}),g=e=>{!function(e,t){try{let r=Y.Wp.json_to_sheet(e),s=Y.Wp.book_new();Y.Wp.book_append_sheet(s,r,"Relat\xf3rio");let a=Object.keys(e[0]||{}).map(()=>({wch:20}));r["!cols"]=a,Y._h(s,t)}catch(e){console.error("Erro ao exportar para Excel:",e),alert("Ocorreu um erro ao exportar para Excel. Por favor, tente novamente.")}}(h(e),"summary"===e?"relatorio-resumo-montagem-pedidos.xlsx":"relatorio-detalhado-montagem-pedidos.xlsx")};return(0,a.jsxs)(v,{children:[(0,a.jsx)(w,{children:(0,a.jsx)(N,{children:"Relat\xf3rios de Desempenho"})}),(0,a.jsxs)(b,{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,a.jsx)("div",{className:"w-full md:w-1/2",children:(0,a.jsxs)(O,{value:s,onValueChange:l,children:[(0,a.jsx)(q,{children:(0,a.jsx)(A,{placeholder:"Selecione o per\xedodo"})}),(0,a.jsxs)(U,{children:[(0,a.jsx)(W,{value:"all",children:"Todo o Per\xedodo"}),(0,a.jsx)(W,{value:"today",children:"Hoje"}),(0,a.jsx)(W,{value:"week",children:"Esta Semana"}),(0,a.jsx)(W,{value:"month",children:"Este M\xeas"})]})]})}),(0,a.jsx)("div",{className:"w-full md:w-1/2",children:(0,a.jsxs)(O,{value:n,onValueChange:o,children:[(0,a.jsx)(q,{children:(0,a.jsx)(A,{placeholder:"Selecione o membro da equipe"})}),(0,a.jsxs)(U,{children:[(0,a.jsx)(W,{value:"all",children:"Todos os Membros"}),t.map(e=>(0,a.jsx)(W,{value:e.id,children:e.name},e.id))]})]})})]}),(0,a.jsxs)(m,{defaultValue:"summary",children:[(0,a.jsxs)(u,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(x,{value:"summary",children:"Resumo"}),(0,a.jsx)(x,{value:"details",children:"Registros Detalhados"})]}),(0,a.jsxs)(f,{value:"summary",children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsxs)(j,{variant:"outline",size:"sm",onClick:()=>g("summary"),className:"flex items-center gap-2",children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),"Exportar para Excel"]})}),(0,a.jsxs)(T,{children:[(0,a.jsx)(S,{children:(0,a.jsxs)(C,{children:[(0,a.jsx)(D,{children:"Membro da Equipe"}),(0,a.jsx)(D,{children:"Pedidos Conclu\xeddos"}),(0,a.jsx)(D,{children:"Tempo M\xe9dio"}),(0,a.jsx)(D,{children:"Tempo Mais R\xe1pido"}),(0,a.jsx)(D,{children:"Tempo Mais Lento"})]})}),(0,a.jsx)(I,{children:0===t.length?(0,a.jsx)(C,{children:(0,a.jsx)(R,{colSpan:5,className:"text-center text-muted-foreground",children:"Nenhum membro da equipe adicionado ainda"})}):t.map(e=>{let t=p[e.id];return(0,a.jsxs)(C,{children:[(0,a.jsx)(R,{children:e.name}),(0,a.jsx)(R,{children:t.count}),(0,a.jsx)(R,{children:t.count>0?c(t.avgTime):"-"}),(0,a.jsx)(R,{children:t.minTime>0?c(t.minTime):"-"}),(0,a.jsx)(R,{children:t.maxTime>0?c(t.maxTime):"-"})]},e.id)})})]})]}),(0,a.jsxs)(f,{value:"details",children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsxs)(j,{variant:"outline",size:"sm",onClick:()=>g("details"),className:"flex items-center gap-2",children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),"Exportar para Excel"]})}),(0,a.jsxs)(T,{children:[(0,a.jsx)(S,{children:(0,a.jsxs)(C,{children:[(0,a.jsx)(D,{children:"Membro da Equipe"}),(0,a.jsx)(D,{children:"Nota #"}),(0,a.jsx)(D,{children:"Data"}),(0,a.jsx)(D,{children:"Tempo Gasto"})]})}),(0,a.jsx)(I,{children:0===d.length?(0,a.jsx)(C,{children:(0,a.jsx)(R,{colSpan:4,className:"text-center text-muted-foreground",children:"Nenhum registro encontrado para os filtros selecionados"})}):d.sort((e,t)=>new Date(t.startTime).getTime()-new Date(e.startTime).getTime()).map(e=>{let r=t.find(t=>t.id===e.personId);return(0,a.jsxs)(C,{children:[(0,a.jsx)(R,{children:(null==r?void 0:r.name)||"Desconhecido"}),(0,a.jsx)(R,{children:e.orderNumber}),(0,a.jsx)(R,{children:new Date(e.startTime).toLocaleDateString("pt-BR")}),(0,a.jsx)(R,{children:c(e.duration)})]},e.id)})})]})]})]})]})]})}let K=(null===(s=window.process)||void 0===s?void 0:s.type)==="renderer";async function Q(e,t){K&&console.log("Salvando dados ".concat(e," via IPC do Electron (simulado)")),localStorage.setItem("duzzi_".concat(e),JSON.stringify(t))}async function X(e,t){if(K){console.log("Carregando dados ".concat(e," via IPC do Electron (simulado)"));let r=localStorage.getItem("duzzi_".concat(e));return r?JSON.parse(r):t}{let r=localStorage.getItem("duzzi_".concat(e));return r?JSON.parse(r):t}}function Z(){let[e,t]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[l,n]=(0,i.useState)([]),[o,d]=(0,i.useState)(!1);(0,i.useEffect)(()=>{"electron"in window&&d(window.electron.isTimerWindow&&window.electron.isTimerWindow())},[]),(0,i.useEffect)(()=>{(async()=>{try{let e=await X("people",[]),r=await X("timeRecords",[]),a=await X("activeTimers",[]);t(e),s(r),n(a)}catch(e){console.error("Falha ao carregar dados iniciais:",e)}})()},[]),(0,i.useEffect)(()=>{(async()=>{try{await Q("people",e),await Q("timeRecords",r),await Q("activeTimers",l)}catch(e){console.error("Falha ao salvar dados:",e)}})()},[e,r,l]);let c=(e,t)=>{n([...l,{id:crypto.randomUUID(),personId:e,orderNumber:t,startTime:new Date().toISOString(),endTime:null,duration:0}])},p=e=>{let t=new Date,a=l.findIndex(t=>t.id===e);if(-1!==a){let e=l[a],i=new Date(e.startTime),o=Math.floor((t.getTime()-i.getTime())/1e3),d={...e,endTime:t.toISOString(),duration:o},c=[...l];c.splice(a,1),n(c),s([...r,d])}};return o?(0,a.jsxs)("div",{className:"container mx-auto max-w-6xl",children:[(0,a.jsx)("div",{className:"flex flex-col items-center mb-6",children:(0,a.jsx)("div",{className:"w-44 h-44 mb-2",children:(0,a.jsx)("img",{src:"./duzzi.png",alt:"Duzzi Logo",className:"w-full h-full object-contain"})})}),(0,a.jsx)(J,{people:e,activeTimers:l,onStartTimer:c,onStopTimer:p})]}):(0,a.jsxs)("div",{className:"container mx-auto max-w-6xl",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,a.jsx)("div",{className:"w-44 h-44 mb-2",children:(0,a.jsx)("img",{src:"./duzzi.png",alt:"Duzzi Logo",className:"w-full h-full object-contain"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-center",children:"Monitoramento de Tempo para Montagem de Pedidos"})]}),(0,a.jsxs)(m,{defaultValue:"timers",className:"w-full",children:[(0,a.jsxs)(u,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(x,{value:"timers",children:"Cron\xf4metros"}),(0,a.jsx)(x,{value:"people",children:"Equipe"}),(0,a.jsx)(x,{value:"reports",children:"Relat\xf3rios"})]}),(0,a.jsx)(f,{value:"timers",children:(0,a.jsx)(J,{people:e,activeTimers:l,onStartTimer:c,onStopTimer:p})}),(0,a.jsx)(f,{value:"people",children:(0,a.jsx)(E,{people:e,onAddPerson:r=>{t([...e,{id:crypto.randomUUID(),name:r}])},onRemovePerson:r=>{t(e.filter(e=>e.id!==r))}})}),(0,a.jsx)(f,{value:"reports",children:(0,a.jsx)(G,{people:e,timeRecords:r})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[524,126,441,517,358],()=>t(6414)),_N_E=e.O()}]);